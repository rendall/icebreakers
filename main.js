(()=>{"use strict";var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)},t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},n=function(e){return e.slice(e.indexOf("*")+1).trim()},r={name:"Carnival",background:"#2B50AA",foreground:"#FF9FE5",highlight:"#FF9FE5",font:'"Rammetto One"'},o=function(e){var t=document.documentElement;t.style.setProperty("--theme-foreground",e.foreground),t.style.setProperty("--theme-background",e.background),t.style.setProperty("--theme-highlight",e.highlight),t.style.setProperty("--theme-font",e.font),function(e){var t="https://fonts.googleapis.com/css?family="+e.replace(/\s/g,"+").replace(/\"/g,"")+"&display=swap",n=document.head.querySelectorAll("link"),r=Array.from(n).some((function(e){return e.href===t}));if(!r){var o=document.createElement("link");o.href=t,o.rel="stylesheet",document.head.appendChild(o)}}(e.font),window.localStorage.setItem("theme",JSON.stringify(e))},u=function(e){return fetch(e).then((function(e){return e.text()}))},i=function(e){return e.split("\n").filter((function(e){return e.match(/^\*/)})).map((function(e){return new RegExp(/^\* _([\w \d]*)_ ([\w#]*) ([\w#]*) ([\w#]*) _("?[\w \d]*"?)_$/).exec(e)})).map((function(e){var t=e[1],n=e[2];return{name:t,foreground:e[3],background:n,highlight:e[4],font:e[5]}}))},c=function(){return Math.floor(2*Math.random())-1};new Promise((function(t){var n=function(){var t=window.localStorage.getItem("theme")||"default-theme";try{var n=JSON.parse(t);return function(e){return"string"!=typeof e&&"foreground"in e}(n)?e(e({},r),n):r}catch(e){return r}}();o(n),t()})).then((function(){return u("QUESTIONS.md")})).then((function(e){var r=e.split("\n").filter((function(e){return e.match(/^\s*\*/)})).map(n).reduce((function(e,n){var r=e[0],o=e[1];if(n.startsWith("Credit:")){var u=function(e){var t=RegExp(/Credit:\s*\[(.*)\]\((.*)\)/gm).exec(e);return{name:t[1],href:t[2]}}(n);return[u,o]}return[r,t(t([],o,!0),[{question:n,credit:r}],!1)]}),[{name:"",href:""},[]]);return r[0],r[1]})).then((function(e){return e.sort(c)})).then((function(e){var t=0,n=function(e){document.querySelector("#question-display").innerHTML=e.question;var t=document.querySelector("#credit-link");t.href=e.credit.href,t.innerHTML=e.credit.name};n(e[0]),document.querySelector("#reload-button").addEventListener("click",(function(){window.history.pushState(t,e[t].question),t=(t+1)%e.length,n(e[t])})),window.onpopstate=function(){var t,r=null!==(t=window.history.state)&&void 0!==t?t:0;n(e[r])}})).then((function(){return e=void 0,t=void 0,r=function(){var e;return function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(t){switch(t.label){case 0:return[4,u("THEMES.md").then(i)];case 1:return e=t.sent(),document.querySelector("#change-theme-button").addEventListener("click",(function(){document.querySelector("body").classList.add("themed");var t=document.documentElement.style.getPropertyValue("--theme-foreground"),n=document.documentElement.style.getPropertyValue("--theme-background"),r=document.documentElement.style.getPropertyValue("--theme-highlight"),u=document.documentElement.style.getPropertyValue("--theme-font"),i=e.findIndex((function(e){return e.background===n&&e.foreground===t&&e.highlight===r&&e.font===u})),c=-1===i?0:(i+1)%e.length,a=e[c];o(a)})),[2]}}))},new((n=void 0)||(n=Promise))((function(o,u){function i(e){try{a(r.next(e))}catch(e){u(e)}}function c(e){try{a(r.throw(e))}catch(e){u(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((r=r.apply(e,t||[])).next())}));var e,t,n,r}))})();